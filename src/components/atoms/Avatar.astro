---
interface Props {
  name?: string;
  email?: string;
  size?: 'sm' | 'md' | 'lg' | 'xl';
  src?: string;
  class?: string;
}

const {
  name = '',
  email = '',
  size = 'md',
  src,
  class: className = '',
} = Astro.props;

const sizeClasses = {
  sm: 'w-8 h-8 text-xs',
  md: 'w-10 h-10 text-sm',
  lg: 'w-12 h-12 text-base',
  xl: 'w-16 h-16 text-lg',
};

const initials = name
  ? name
      .split(' ')
      .map(n => n[0])
      .join('')
      .toUpperCase()
      .slice(0, 2)
  : email
  ? email[0].toUpperCase()
  : 'U';

const classes = `${sizeClasses[size]} ${className}`;
---

{src ? (
  <img
    src={src}
    alt={name || email || 'Avatar'}
    class={`${classes} rounded-full object-cover bg-gray-100 dark:bg-gray-800`}
  />
) : (
  <div
    class={`${classes} rounded-full bg-gradient-to-br from-primary/20 to-primary/10 dark:from-primary/30 dark:to-primary/20 flex items-center justify-center font-outfit font-semibold text-primary ring-2 ring-primary/10`}
  >
    {initials}
  </div>
)}

