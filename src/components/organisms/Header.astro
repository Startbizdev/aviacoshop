---
import SearchBar from '../molecules/SearchBar.astro';
import CartButton from '../molecules/CartButton.astro';
import SheetMenu from '../molecules/SheetMenu.astro';
import UserMenu from '../molecules/UserMenu.astro';
import Image from '../atoms/Image.astro';

---

<header class="sticky top-0 z-50 bg-white/95 dark:bg-gray-900/95 backdrop-blur-md border-b border-gray-200 dark:border-gray-800 shadow-sm will-change-[background-color,border-color]">
  <div class="container mx-auto px-4 py-3">
    <div class="flex items-center justify-between">
      <!-- Hamburger + Logo Group -->
      <div class="flex items-center gap-5">
        <!-- Hamburger Menu Button -->
        <button 
          id="hamburger-btn" 
          class="flex flex-col items-center gap-1 text-gray-700 dark:text-gray-300 hover:text-primary transition-colors group"
          aria-label="Ouvrir le menu"
        >
          <div class="flex flex-col gap-1.5">
            <span id="hamburger-line-1" class="block w-6 h-0.5 bg-current transition-colors"></span>
            <span id="hamburger-line-2" class="block w-6 h-0.5 bg-current transition-colors"></span>
            <span id="hamburger-line-3" class="block w-6 h-0.5 bg-current transition-colors"></span>
          </div>
          <span class="text-[8px] font-medium uppercase tracking-wider w-6 text-center">Menu</span>
        </button>

        <!-- Logo -->
        <a href="/" class="flex-shrink-0 flex items-center group">
          <Image
            src="/aviacologo.png"
            alt="Aviaco Shop Logo"
            width={40}
            height={40}
            class="h-10 w-auto object-contain transition-transform duration-300 group-hover:scale-105"
          />
        </a>
      </div>
      
      <!-- Search Bar (desktop) -->
      <div class="hidden md:flex flex-1 max-w-2xl mx-8">
        <SearchBar uniqueId="desktop" />
      </div>
      
      <!-- Actions -->
      <div class="flex items-center gap-1">
        <!-- User Menu -->
        <UserMenu />
        
        <CartButton />
      </div>
    </div>
    
    <!-- Mobile Search Bar (toujours visible sur mobile) -->
    <div class="md:hidden mt-3 pt-3 border-t border-gray-200 dark:border-gray-800">
      <SearchBar uniqueId="mobile" />
    </div>
  </div>

  <SheetMenu />
</header>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const hamburgerBtn = document.getElementById('hamburger-btn');
    
    // Toggle hamburger menu (sheet)
    if (hamburgerBtn) {
      hamburgerBtn.addEventListener('click', () => {
        if (window.openSheetMenu) {
          window.openSheetMenu();
        }
      });
    }
  });
</script>

